from lcu_driver import Connector
import colorama
import os
import time

client = Connector()
colorama.init()
check: bool = False
summonerID: int = 0

async def get_name(cmd) -> bool:
    "Loldeki bağlantı kurulan hesabın adını gönderir."
    summoner = await cmd.request("GET", "/lol-summoner/v1/current-summoner")
    if summoner.status == 200:
        data: dict = await summoner.json()
        global summonerID
        summonerID = data['summonerId']
        print(f"{colorama.Style.BRIGHT + colorama.Fore.GREEN + data['displayName'] + colorama.Style.RESET_ALL} ismiyle giriş yapıldı!")
        return True

    else:
        print(colorama.Style.BRIGHT + colorama.Fore.RED + "[HATA] Lol Arkada Açık Değil" + colorama.Style.RESET_ALL)
        return False

async def boostBAS(cmd) -> int:
    "ARAM/URF boost basar"
    req = await cmd.request("POST", "/lol-champ-select/v1/team-boost/purchase")
    return req.status

@client.ready
async def on(cmd) -> None:
    "Main Func"
    check = await get_name(cmd)
    while check:
        input(f"{colorama.Style.BRIGHT + colorama.Fore.BLUE + '[R3nzTheCodeGOD]' + colorama.Style.RESET_ALL} Boost Basmak için Entere basın...")
        status = await boostBAS(cmd)
        if status == 204:
            print(colorama.Style.BRIGHT + colorama.Fore.GREEN + "[BAŞARILI] Boost Basıldı!" + colorama.Style.RESET_ALL)
        elif status == 500:
            print(colorama.Style.BRIGHT + colorama.Fore.YELLOW + "[HATA] Boost Zaten Başkası Tarafından Açılmış!" + colorama.Style.RESET_ALL)
        else:
            print(colorama.Style.BRIGHT + colorama.Fore.RED + "[HATA] Şampiyon Seçiminde Değilsin!" + colorama.Style.RESET_ALL)
        time.sleep(1)

if __name__ == "__main__":
    os.system("@echo off")
    os.system("cls")
    print(colorama.Style.BRIGHT + colorama.Fore.GREEN + f"""
     ____  _____           _____ _           ____          _       ____  ___  ____  
    |  _ \|___ / _ __  ___|_   _| |__   ___ / ___|___   __| | ___ / ___|/ _ \|  _ \ 
    | |_) | |_ \| '_ \|_  / | | | '_ \ / _ \ |   / _ \ / _` |/ _ \ |  _| | | | | | |
    |  _ < ___) | | | |/ /  | | | | | |  __/ |__| (_) | (_| |  __/ |_| | |_| | |_| |
    |_| \_\____/|_| |_/___| |_| |_| |_|\___|\____\___/ \__,_|\___|\____|\___/|____/

                    {colorama.Fore.CYAN + "GitHub: https://github.com/R3nzTheCodeGOD" + colorama.Style.RESET_ALL}""")
    client.start()